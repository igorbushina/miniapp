const countries = {
  "ÐÐ·ÐµÑ€Ð±Ð°Ð¹Ð´Ð¶Ð°Ð½": [
    "ÐÐ³Ð´Ð°Ð¼", "ÐÐ³Ð´Ð°Ñˆ", "ÐÐ³Ð´Ð¶Ð°Ð±ÐµÐ´Ð¸", "ÐÐ³ÑÑ‚Ð°Ñ„Ð°", "ÐÑÑ‚Ð°Ñ€Ð°",
    "Ð‘Ð°ÐºÑƒ", "Ð‘Ð°Ñ€Ð´Ð°", "Ð‘ÐµÐ¹Ð»Ð°Ð³Ð°Ð½", "Ð‘Ð°Ð»Ð°ÐºÐµÐ½", "Ð“ÑÐ½Ð´Ð¶Ð°",
    "Ð“Ð¾Ð±ÑƒÑÑ‚Ð°Ð½", "Ð“ÑƒÐ±Ð°", "Ð“Ð¾Ñ€Ð°Ð´Ð°Ð³", "Ð“Ñ‘Ð¹Ñ‡Ð°Ð¹", "Ð—Ð°ÐºÐ°Ñ‚Ð°Ð»Ñ‹",
    "Ð—Ð°Ð³Ð°Ñ‚Ð°Ð»Ð°", "Ð—Ð°Ñ€Ð´Ð¾Ð±", "Ð˜Ð¼Ð¸Ñ€Ð»Ð¸", "Ð˜Ð¼Ð¸ÑˆÐ»Ð¸", "ÐšÐµÐ»ÑŒÐ±Ð°Ð´Ð¶Ð°Ñ€",
    "ÐšÑƒÑÐ°Ñ€Ñ‹", "ÐšÑŽÑ€Ð´Ð°Ð¼Ð¸Ñ€", "Ð›ÐµÐ½ÐºÐ¾Ñ€Ð°Ð½ÑŒ", "ÐœÐ¸Ð½Ð³ÐµÑ‡Ð°ÑƒÑ€", "ÐÐ°Ñ„Ñ‚Ð°Ð»Ð°Ð½",
    "ÐÐ°Ñ…Ð¸Ñ‡ÐµÐ²Ð°Ð½ÑŒ", "ÐÐµÑ„Ñ‚ÐµÑ‡Ð°Ð»Ð°", "ÐžÐ³ÑƒÐ·", "Ð¡Ð°Ð°Ñ‚Ð»Ñ‹", "Ð¡Ð°Ð±Ð¸Ñ€Ð°Ð±Ð°Ð´",
    "Ð¡Ð°Ð»ÑŒÑÐ½", "Ð¡Ð°Ð¼ÑƒÑ…", "Ð¡ÑƒÐ¼Ð³Ð°Ð¸Ñ‚", "Ð¢ÐµÑ€Ñ‚ÐµÑ€", "Ð¢Ð¾Ð²ÑƒÐ·",
    "Ð£Ð´Ð¶Ð°Ñ€Ñ‹", "Ð¤Ð¸Ð·ÑƒÐ»Ð¸", "Ð¥Ð°Ñ‡Ð¼Ð°Ð·", "Ð¥Ð¾Ð´Ð¶Ð°Ð²ÐµÐ½Ð´", "Ð¥ÑƒÐ´Ð°Ñ‚",
    "Ð¥Ñ‹Ð·Ñ‹", "Ð¨Ð°Ð¼ÐºÐ¸Ñ€", "Ð¨Ð°Ñ€ÑƒÑ€", "Ð¨ÐµÐºÐ¸", "Ð¨ÐµÐ¼Ð°Ñ…Ð°",
    "Ð¨Ð¸Ñ€Ð²Ð°Ð½", "Ð¨ÑƒÑˆÐ°", "Ð¯Ñ€Ð´Ñ‹Ð¼Ð»Ñ‹", "Ð˜ÑÐ¼Ð°Ð¸Ð»Ð»Ñ‹"
  ],
  "ÐÑ€Ð¼ÐµÐ½Ð¸Ñ": [
    "ÐÐ±Ð¾Ð²ÑÐ½", "ÐÐ¹Ñ€ÑƒÐ¼", "ÐÐ»Ð°Ð³Ñ‘Ð·", "ÐÐ»Ð°Ð²ÐµÑ€Ð´Ð¸", "ÐÐ½Ð¸",
    "ÐÑ€Ð°Ð³Ð°Ñ†", "ÐÑ€Ð°Ñ€Ð°Ñ‚", "ÐÑ€Ñ‚Ð¸Ðº", "ÐÑ€Ð¼Ð°Ð²Ð¸Ñ€", "ÐÑ€Ñ‚Ð°Ð²Ð°Ð·",
    "ÐÑ€Ñ†Ð½Ð¸", "ÐÑˆÑ‚Ð°Ñ€Ð°Ðº", "Ð‘ÑŽÑ€ÐµÐ³Ð°Ð²Ð°Ð½", "Ð‘ÐµÑ€Ð´", "Ð’Ð°Ð³Ð°Ñ€ÑˆÐ°Ð¿Ð°Ñ‚",
    "Ð’Ð°Ð½Ð°Ð´Ð·Ð¾Ñ€", "Ð’ÐµÐ´Ð¸", "Ð“Ð°Ð²Ð°Ñ€", "Ð“Ð°Ñ€Ð½Ð¸", "Ð“ÐµÑ…Ð¾Ð²Ð¸Ñ‚",
    "Ð“ÐµÑ…Ð°Ñ€ÐºÑƒÐ½Ð¸Ðº", "Ð“Ð¾Ñ€Ð¸Ñ", "Ð“ÑŽÐ¼Ñ€Ð¸", "Ð”Ð¶ÐµÑ€Ð¼ÑƒÐº", "Ð”Ð¸Ð»Ð¸Ð¶Ð°Ð½",
    "Ð•Ð³Ð²Ð°Ñ€Ð´", "Ð•Ñ€Ð°ÑÑ…", "Ð•Ñ€ÐµÐ²Ð°Ð½", "Ð•Ñ…ÐµÐ³Ð½Ð°Ð´Ð·Ð¾Ñ€", "Ð—Ð¾Ð²ÑƒÐ½",
    "Ð˜Ð´Ð¶ÐµÐ²Ð°Ð½", "ÐšÐ°Ð¿Ð°Ð½", "ÐœÐ°Ñ€Ð°Ð»Ð¸Ðº", "ÐœÐ°ÑÐ¸Ñ", "ÐœÐ°Ñ€Ñ‚ÑƒÐ½Ð¸",
    "ÐœÐµÑ†Ð°Ð¼Ð¾Ñ€", "ÐÐ¾ÐµÐ¼Ð±ÐµÑ€ÑÐ½", "ÐÐ¾Ñ€ ÐÑ‡Ð¸Ð½", "ÐÐ¾Ñ€ Ð¥Ð°Ñ‡Ð½", "Ð Ð°Ð·Ð´Ð°Ð½",
    "Ð¡ÐµÐ²Ð°Ð½", "Ð¡Ð¸ÑÐ¸Ð°Ð½", "Ð¡Ð¿Ð¸Ñ‚Ð°Ðº", "Ð¡Ñ‚ÐµÐ¿Ð°Ð½Ð°Ð²Ð°Ð½", "Ð¢Ð°Ð»Ð¸Ð½",
    "Ð¢Ð°ÑˆÐ¸Ñ€", "Ð§Ð°Ñ€ÐµÐ½Ñ†Ð°Ð²Ð°Ð½", "Ð¦Ð°Ñ…ÐºÐ°Ð´Ð·Ð¾Ñ€", "Ð¨Ð½Ð¾Ñ…", "Ð¨Ð¸Ñ€Ð°Ðº"
  ],
  "Ð“ÐµÑ€Ð¼Ð°Ð½Ð¸Ñ": [
    "ÐÑƒÐ³ÑÐ±ÑƒÑ€Ð³", "Ð‘ÐµÑ€Ð»Ð¸Ð½", "Ð‘Ð¸Ð»ÐµÑ„ÐµÐ»ÑŒÐ´", "Ð‘Ð¾Ð½Ð½", "Ð‘Ð¾Ñ…ÑƒÐ¼",
    "Ð‘Ñ€Ð°ÑƒÐ½ÑˆÐ²ÐµÐ¹Ð³", "Ð‘Ñ€ÐµÐ¼ÐµÐ½", "Ð’Ð¸ÑÐ±Ð°Ð´ÐµÐ½", "Ð’Ð¾Ð»ÑŒÑ„ÑÐ±ÑƒÑ€Ð³", "Ð’ÑƒÐ¿Ð¿ÐµÑ€Ñ‚Ð°Ð»ÑŒ",
    "Ð“Ð°Ð½Ð½Ð¾Ð²ÐµÑ€", "Ð“ÐµÐ»ÑŒÐ·ÐµÐ½ÐºÐ¸Ñ€Ñ…ÐµÐ½", "Ð“ÐµÐ»ÑŒÐ´ÐµÑ€Ð½", "Ð“ÐµÑ€Ð°", "Ð“Ñ‘Ñ‚Ñ‚Ð¸Ð½Ð³ÐµÐ½",
    "Ð”Ð¾Ñ€Ñ‚Ð¼ÑƒÐ½Ð´", "Ð”Ñ€ÐµÐ·Ð´ÐµÐ½", "Ð”ÑŽÑÑÐµÐ»ÑŒÐ´Ð¾Ñ€Ñ„", "Ð—Ð°Ñ€Ð±Ñ€ÑŽÐºÐµÐ½", "Ð—Ð¸Ð³ÐµÐ½",
    "ÐšÐ°ÑÑÐµÐ»ÑŒ", "ÐšÑ‘Ð»ÑŒÐ½", "ÐšÐ¸Ð»ÑŒ", "ÐšÐ¾Ð±Ð»ÐµÐ½Ñ†", "ÐšÑ€ÐµÑ„ÐµÐ»ÑŒÐ´",
    "Ð›ÑŽÐ±ÐµÐº", "ÐœÐ°Ð¹Ð½Ñ†", "ÐœÐ°Ð½Ð³ÐµÐ¹Ð¼", "ÐœÑŽÐ½ÑÑ‚ÐµÑ€", "ÐœÑŽÐ½Ñ…ÐµÐ½",
    "ÐÑŽÑ€Ð½Ð±ÐµÑ€Ð³", "ÐžÐ»ÑŒÐ´ÐµÐ½Ð±ÑƒÑ€Ð³", "ÐŸÐ¾Ñ‚ÑÐ´Ð°Ð¼", "Ð ÐµÐ³ÐµÐ½ÑÐ±ÑƒÑ€Ð³", "Ð Ð¾ÑÑ‚Ð¾Ðº",
    "Ð¨Ñ‚ÑƒÑ‚Ð³Ð°Ñ€Ñ‚", "Ð¤Ñ€Ð°Ð¹Ð±ÑƒÑ€Ð³", "Ð¤Ñ€Ð°Ð½ÐºÑ„ÑƒÑ€Ñ‚-Ð½Ð°-ÐœÐ°Ð¹Ð½Ðµ", "Ð¥Ð°Ð³ÐµÐ½", "Ð¥Ð°Ð¹Ð»ÑŒÐ±Ñ€Ð¾Ð½Ð½",
    "Ð¥Ð°Ð¼Ð¼", "Ð¥ÐµÐ¼Ð½Ð¸Ñ†", "Ð¦Ð²Ð¸ÐºÐºÐ°Ñƒ", "Ð­Ñ€Ñ„ÑƒÑ€Ñ‚", "Ð­ÑÑÐµÐ½",
    "ÐÑ…ÐµÐ½", "Ð¥Ð°Ð½Ð°Ñƒ", "Ð¥ÐµÑ€Ð½Ðµ", "Ð—Ð¾Ð»Ð¸Ð½Ð³ÐµÐ½", "Ð£Ð»ÑŒÐ¼"
  ],
  "Ð“Ñ€ÑƒÐ·Ð¸Ñ": [
    "ÐÑ…Ð°Ð»Ñ†Ð¸Ñ…Ðµ", "ÐÑ…Ð°Ð»ÐºÐ°Ð»Ð°ÐºÐ¸", "Ð‘Ð°Ñ‚ÑƒÐ¼Ð¸", "Ð‘Ð¾Ð»Ð½Ð¸ÑÐ¸", "Ð’Ð°Ð»Ðµ",
    "Ð“Ð°Ñ€Ð´Ð°Ð±Ð°Ð½Ð¸", "Ð“Ð¾Ñ€Ð¸", "Ð“ÑƒÑ€Ð´Ð¶Ð°Ð°Ð½Ð¸", "Ð”ÐµÐ´Ð¾Ð¿Ð»Ð¸ÑÑ†ÐºÐ°Ñ€Ð¾", "Ð”Ð¼Ð°Ð½Ð¸ÑÐ¸",
    "Ð”ÑƒÑˆÐµÑ‚Ð¸", "Ð—ÐµÑÑ‚Ð°Ñ„Ð¾Ð½Ð¸", "Ð—ÑƒÐ³Ð´Ð¸Ð´Ð¸", "ÐšÐ°ÑÐ¿Ð¸", "ÐšÐ²Ð°Ñ€ÐµÐ»Ð¸",
    "ÐšÐ¾Ð±ÑƒÐ»ÐµÑ‚Ð¸", "Ð›Ð°Ð³Ð¾Ð´ÐµÑ…Ð¸", "Ð›Ð°Ð½Ñ‡Ñ…ÑƒÑ‚Ð¸", "ÐœÐ°Ñ€Ð½ÐµÑƒÐ»Ð¸", "ÐœÐ°Ñ€Ñ‚Ð²Ð¸Ð»Ð¸",
    "ÐžÐ·ÑƒÑ€Ð³ÐµÑ‚Ð¸", "ÐžÐ½", "ÐŸÐ¾Ñ‚Ð¸", "Ð ÑƒÑÑ‚Ð°Ð²Ð¸", "Ð¡Ð°Ð³Ð°Ñ€ÐµÐ´Ð¶Ð¾",
    "Ð¡Ð°Ð¼Ñ‚Ñ€ÐµÐ´Ð¸Ð°", "Ð¡ÐµÐ½Ð°ÐºÐµ", "Ð¡Ð¸Ð³Ð½Ð°Ñ…Ð¸", "Ð¢ÐµÐ»Ð°Ð²Ð¸", "Ð¢ÐµÑ‚Ñ€Ð¸-Ð¦ÐºÐ°Ñ€Ð¾",
    "Ð¢ÐºÐ¸Ð±ÑƒÐ»Ð¸", "Ð¢Ð±Ð¸Ð»Ð¸ÑÐ¸", "Ð¦Ð°Ð»ÐµÐ½Ð´Ð¶Ð¸Ñ…Ð°", "Ð¦Ð°Ð»ÐºÐ¸", "Ð¦Ð½Ð¾Ñ€Ð¸",
    "Ð¦Ñ…Ð°Ð»Ñ‚ÑƒÐ±Ð¾", "Ð¦Ñ…Ð¸Ð½Ð²Ð°Ð»Ð¸", "Ð§Ð°ÐºÐ²Ð¸", "Ð§Ð¸Ð°Ñ‚ÑƒÑ€Ð°", "Ð§Ð¾Ñ…Ð°Ñ‚Ð°ÑƒÑ€Ð¸",
    "Ð¨Ð°ÑƒÐ¼ÑÐ½Ð¸", "Ð¨ÐµÐ¼Ð¾ÐºÐ¼ÐµÐ´Ð¸", "Ð¨Ð¾Ñ€Ð¾Ð¿Ð°Ð½Ð¸", "Ð¥Ð°ÑˆÑƒÑ€Ð¸", "Ð¥Ð¾Ð±Ð¸",
    "Ð¥Ð¾Ð½Ð¸", "Ð¥ÑƒÐ»Ð¾", "Ð¦Ð¸Ñ‚ÐµÐ»Ñ†ÐºÐ°Ñ€Ð¾", "ÐšÑƒÑ‚Ð°Ð¸ÑÐ¸"
  ],
  "Ð˜Ð·Ñ€Ð°Ð¸Ð»ÑŒ": [
    "ÐÐºÐºÐ¾", "ÐÑ€Ð°Ð´", "ÐÑˆÐ´Ð¾Ð´", "ÐÑˆÐºÐµÐ»Ð¾Ð½", "Ð‘Ð°Ñ‚-Ð¯Ð¼",
    "Ð‘ÐµÑÑ€-Ð¨ÐµÐ²Ð°", "Ð‘Ð½ÐµÐ¹-Ð‘Ñ€Ð°Ðº", "Ð“ÐµÑ€Ñ†Ð»Ð¸Ñ", "Ð“Ð¸Ð²Ð°Ñ‚Ð°Ð¸Ð¼", "Ð“ÑƒÑˆ-Ð”Ð°Ð½",
    "Ð”Ð¸Ð¼Ð¾Ð½Ð°", "Ð™ÐµÑ€ÑƒÑ…Ð°Ð¼", "ÐšÐ°Ñ€Ð¼Ð¸ÑÐ»ÑŒ", "ÐšÐ¸Ñ€ÑŒÑÑ‚-Ð¨Ð¼Ð¾Ð½Ð°", "ÐšÐ¸Ñ€ÑŒÑÑ‚-ÐÑ‚Ð°",
    "ÐšÐ¸Ñ€ÑŒÑÑ‚-Ð‘ÑÐ»Ð¸Ðº", "ÐšÐ¸Ñ€ÑŒÑÑ‚-ÐœÐ°Ð»Ð°Ñ…Ð¸", "ÐšÐ¸Ñ€ÑŒÑÑ‚-ÐœÐ¾Ñ†ÐºÐ¸Ð½", "ÐšÐ¸Ñ€ÑŒÑÑ‚-Ð¯Ð¼", "Ð›Ð¾Ð´",
    "ÐœÐ°Ð°Ð»Ðµ-ÐÐ´ÑƒÐ¼Ð¸Ð¼", "ÐœÐ¸Ð³Ð´Ð°Ð»ÑŒ", "ÐœÐ¾Ð´Ð¸Ð½", "ÐÐ°Ð³Ð°Ñ€Ð¸Ñ", "ÐÐ°Ð·Ñ€ÐµÑ‚",
    "ÐÐ°Ñ…Ð°Ð»Ð°Ð»ÑŒ", "ÐÐµÑˆÐµÑ€", "ÐÐµÑ‚Ð°Ð½Ð¸Ñ", "ÐÐµÑ‚Ð¸Ð²Ð¾Ñ‚", "ÐžÑ„Ð°ÐºÐ¸Ð¼",
    "ÐŸÐ°Ñ€Ð´ÐµÑ-Ð¥Ð°Ð½Ð°", "ÐŸÐµÑ‚Ð°Ñ…-Ð¢Ð¸ÐºÐ²Ð°", "Ð Ð°Ð¼Ð°Ñ‚-Ð“Ð°Ð½", "Ð Ð°Ð¼Ð°Ñ‚-Ð¥Ð°-Ð¨Ð°Ñ€Ð¾Ð½", "Ð ÐµÑ…Ð¾Ð²Ð¾Ñ‚",
    "Ð Ð¾Ñˆ-Ñ…Ð°-ÐÐ¸Ð½", "Ð¡Ð´ÐµÑ€Ð¾Ñ‚", "Ð¢ÐµÐ»ÑŒ-ÐÐ²Ð¸Ð²", "Ð¢Ð²ÐµÑ€Ð¸Ñ", "Ð£Ð¼-ÑÐ»ÑŒ-Ð¤Ð°Ñ…Ð¼",
    "Ð¥Ð°Ð¹Ñ„Ð°", "Ð¥Ð°Ð´ÐµÑ€Ð°", "Ð¥Ð¾Ð»Ð¾Ð½", "Ð¨Ð¾Ñ…Ð°Ð¼", "Ð¯Ð²Ð½Ðµ",
    "Ð¯Ñ„Ñ„Ð¾", "ÐšÐ°Ñ†Ñ€Ð¸Ð½", "Ð™Ð¾ÐºÐ½ÐµÐ°Ð¼", "Ð‘ÐµÐ¹Ñ‚-Ð¨ÐµÐ¼ÐµÑˆ", "Ð‘ÐµÐ¹Ñ‚-Ð¯Ð½"
  ]
};

window.addEventListener("DOMContentLoaded", () => {
  const countrySelect = document.getElementById("country");
  const citySelect = document.getElementById("city");
  const adForm = document.getElementById("adForm");
  const contactInput = document.getElementById("contact");
  const textInput = document.getElementById("text");
  const categorySelect = document.getElementById("category");
  const gdprCheckbox = document.getElementById("gdpr");
  const viewBtn = document.getElementById("viewBtn");
  const addBtn = document.getElementById("addBtn");
  const backBtn = document.getElementById("backBtn");

  if (!window.Telegram || !Telegram.WebApp || !Telegram.WebApp.sendData) {
    alert("âš ï¸ ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð¾Ñ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ Ð¼Ð¸Ð½Ð¸-Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð²Ð½ÑƒÑ‚Ñ€Ð¸ Telegram.");
    return;
  }

  // Ð—Ð°Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ ÑÐ¿Ð¸ÑÐºÐ° ÑÑ‚Ñ€Ð°Ð½
  Object.keys(countries).sort().forEach((country) => {
    const option = document.createElement("option");
    option.value = country;
    option.textContent = country;
    countrySelect.appendChild(option);
  });

  // ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð³Ð¾Ñ€Ð¾Ð´Ð¾Ð² Ð¿Ñ€Ð¸ ÑÐ¼ÐµÐ½Ðµ ÑÑ‚Ñ€Ð°Ð½Ñ‹
  countrySelect.addEventListener("change", () => {
    const cities = countries[countrySelect.value] || [];
    citySelect.innerHTML = "";
    cities.sort().forEach((city) => {
      const option = document.createElement("option");
      option.value = city;
      option.textContent = city;
      citySelect.appendChild(option);
    });
  });

  // Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð³Ð¾Ñ€Ð¾Ð´Ð¾Ð² Ð¿Ñ€Ð¸ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐµ
  countrySelect.dispatchEvent(new Event("change"));

  // ÐšÐ½Ð¾Ð¿ÐºÐ° Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€Ð°
  viewBtn.addEventListener("click", () => {
    const country = countrySelect.value;
    const city = citySelect.value;

    if (!country || !city) {
      alert("âš ï¸ ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð²Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ ÑÑ‚Ñ€Ð°Ð½Ñƒ Ð¸ Ð³Ð¾Ñ€Ð¾Ð´.");
      return;
    }

    const payload = {
      action: "view",
      country,
      city
    };

    Telegram.WebApp.sendData(JSON.stringify(payload));
    console.log("ðŸ“¤ View payload:", payload);

    if (country === "Ð“ÐµÑ€Ð¼Ð°Ð½Ð¸Ñ" && city === "Ð“ÐµÐ»ÑŒÐ´ÐµÑ€Ð½") {
      Telegram.WebApp.openTelegramLink("https://t.me/zhivuv_gelderne");
    }
  });

  // ÐŸÐ¾ÐºÐ°Ð· Ñ„Ð¾Ñ€Ð¼Ñ‹
  addBtn.addEventListener("click", () => {
    adForm.style.display = "block";
    viewBtn.style.display = "none";
    addBtn.style.display = "none";
    backBtn.style.display = "block";
  });

  backBtn.addEventListener("click", () => {
    adForm.style.display = "none";
    viewBtn.style.display = "block";
    addBtn.style.display = "block";
    backBtn.style.display = "none";
  });

  adForm.addEventListener("submit", (e) => {
    e.preventDefault();

    const payload = {
      action: "add",
      country: countrySelect.value,
      city: citySelect.value,
      category: categorySelect.value,
      contact: contactInput.value.trim(),
      text: textInput.value.trim()
    };

    if (!payload.country || !payload.city || !payload.category || !payload.contact || !payload.text) {
      alert("âš ï¸ ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð·Ð°Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ Ð²ÑÐµ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð¿Ð¾Ð»Ñ.");
      return;
    }

    if (!gdprCheckbox.checked) {
      alert("âš ï¸ ÐŸÐ¾Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¸Ñ‚Ðµ ÑÐ¾Ð³Ð»Ð°ÑÐ¸Ðµ Ð½Ð° Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÑƒ Ð¿ÐµÑ€ÑÐ¾Ð½Ð°Ð»ÑŒÐ½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ….");
      return;
    }

    Telegram.WebApp.sendData(JSON.stringify(payload));
    console.log("ðŸ“¤ Add payload:", payload);

    adForm.reset();
    adForm.style.display = "none";
    viewBtn.style.display = "block";
    addBtn.style.display = "block";
    backBtn.style.display = "none";

    setTimeout(() => Telegram.WebApp.close(), 400);
  });
});
